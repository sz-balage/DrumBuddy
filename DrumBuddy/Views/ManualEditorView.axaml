<reactiveUi:ReactiveUserControl x:TypeArguments="vm:ManualEditorViewModel"
                                xmlns="https://github.com/avaloniaui"
                                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                                xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                                xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                                xmlns:vm="clr-namespace:DrumBuddy.ViewModels"
                                xmlns:reactiveUi="http://reactiveui.net"
                                xmlns:helperViews="clr-namespace:DrumBuddy.Views.HelperViews"
                                mc:Ignorable="d" d:DesignWidth="1600" d:DesignHeight="800"
                                x:DataType="vm:ManualEditorViewModel"
                                x:Class="DrumBuddy.Views.ManualEditorView">
    <Grid Background="{DynamicResource CardItemColor}">
        <Grid RowDefinitions="Auto,*,Auto,*" x:Name="Root">
            <Border Height="66" Margin="0,0,0,10" Grid.Row="0" Background="{DynamicResource HeaderGray}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="0.3*" />
                        <ColumnDefinition Width="0.3*" />
                        <ColumnDefinition Width="0.3*" />
                    </Grid.ColumnDefinitions>
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="NavigateBackButton" Height="66" Width="41" Margin="0,0,0,6"
                                Background="{DynamicResource HeaderGray}">
                            <PathIcon Data="{StaticResource ArrowLeft}" />
                        </Button>
                        <TextBlock Text="Manual editor"
                                   Classes="header"
                                   Margin="18,18,0,18"
                                   FontFamily="{StaticResource NunitoFont}"
                                   VerticalAlignment="Center" />
                        <TextBlock x:Name="NameTextBlock"
                                   Classes="header"
                                   TextTrimming="CharacterEllipsis"
                                   MaxWidth="240"
                                   Margin="0,18,18,18"
                                   FontFamily="{StaticResource NunitoFont}"
                                   VerticalAlignment="Center" />
                    </StackPanel>
                    <StackPanel Grid.Row="0"
                                Grid.Column="1"
                                Orientation="Horizontal"
                                HorizontalAlignment="Center">
                        <Label FontSize="24" FontFamily="{StaticResource NunitoFont}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center">
                            BPM:
                        </Label>
                        <NumericUpDown x:Name="BpmNumeric"
                                       Minimum="20"
                                       Maximum="250"
                                       Value="100"
                                       FormatString="0"
                                       FontSize="24"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center" />
                    </StackPanel>
                    <Button Grid.Column="2" x:Name="SaveButton"
                            Background="{DynamicResource HeaderGray}" HorizontalAlignment="Right">
                        <StackPanel Orientation="Horizontal">
                            <PathIcon Data="{StaticResource Save}" Margin="0,0,0,5" />
                            <TextBlock Text="Save" FontFamily="{StaticResource NunitoFont}"
                                       FontSize="24"
                                       Margin="10" />
                        </StackPanel>
                    </Button>
                </Grid>
            </Border>
            <Border Grid.Row="1"
                    BorderBrush="{DynamicResource HeaderGray}"
                    BorderThickness="1"
                    CornerRadius="12"
                    Background="White"
                    BoxShadow="0 2 6 #00000030"
                    Padding="8"
                    Margin="8">
                <ScrollViewer x:Name="MeasuresScrollViewer"
                              VerticalScrollBarVisibility="Auto"
                              MinHeight="200">
                    <ItemsControl x:Name="MeasuresItemsControl">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <helperViews:MeasureWrapPanel />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Border x:Name="MeasureBorder"
                                            PointerPressed="MeasureBorder_OnPointerPressed"
                                            BorderThickness="2"
                                            CornerRadius="8"
                                            BorderBrush="Transparent"
                                            HorizontalAlignment="Stretch"
                                            Margin="-3"
                                            VerticalAlignment="Stretch">
                                        <helperViews:MeasureView />
                                    </Border>
                                    <StackPanel Orientation="Horizontal"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Top">
                                        <Button x:Name="MoveLeftMeasureButton" IsVisible="False"
                                                Width="32" Height="32"
                                                Background="White"
                                                BorderThickness="1"
                                                BorderBrush="{DynamicResource HeaderGray}"
                                                Cursor="Hand"
                                                Click="MoveLeftMeasureButton_OnClick"
                                                ToolTip.Tip="Move measure to the left">
                                            <Button.Styles>
                                                <Style Selector="Button:pointerover">
                                                    <Setter Property="Background" Value="{DynamicResource HeaderGray}" />
                                                </Style>
                                            </Button.Styles>
                                            <PathIcon Foreground="{StaticResource Accent}"
                                                      Data="{StaticResource ArrowLeft}" />
                                        </Button>
                                        <Button x:Name="DeleteMeasureButton" IsVisible="False"
                                                Width="32"
                                                Height="32"
                                                Background="White"
                                                Foreground="{StaticResource Error}"
                                                BorderThickness="1"
                                                BorderBrush="{DynamicResource HeaderGray}"
                                                Cursor="Hand"
                                                Click="DeleteMeasureButton_OnClick"
                                                ToolTip.Tip="Delete measure">
                                            <Button.Styles>
                                                <Style Selector="Button:pointerover">
                                                    <Setter Property="Background" Value="{DynamicResource HeaderGray}" />
                                                </Style>
                                            </Button.Styles>
                                            <PathIcon Foreground="{StaticResource Error}"
                                                      Data="{StaticResource delete}" />
                                        </Button>
                                        <Button x:Name="DuplicateMeasureButton"
                                                IsVisible="False"
                                                Width="32"
                                                Height="32"
                                                Background="White"
                                                BorderThickness="1"
                                                BorderBrush="{DynamicResource HeaderGray}"
                                                Cursor="Hand"
                                                Click="DuplicateMeasureButton_OnClick"
                                                ToolTip.Tip="Duplicate measure">
                                            <Button.Styles>
                                                <Style Selector="Button:pointerover">
                                                    <Setter Property="Background" Value="{DynamicResource HeaderGray}" />
                                                </Style>
                                            </Button.Styles>
                                            <PathIcon Foreground="{StaticResource Accent}"
                                                      Data="{StaticResource Duplicate}" />
                                        </Button>

                                        <Button x:Name="MoveRightMeasureButton" IsVisible="False"
                                                Width="32" Height="32"
                                                Background="White"
                                                BorderThickness="1"
                                                BorderBrush="{DynamicResource HeaderGray}"
                                                Cursor="Hand"
                                                Click="MoveRightMeasureButton_OnClick"
                                                ToolTip.Tip="Move measure to the right">
                                            <Button.Styles>
                                                <Style Selector="Button:pointerover">
                                                    <Setter Property="Background" Value="{DynamicResource HeaderGray}" />
                                                </Style>
                                            </Button.Styles>
                                            <PathIcon Foreground="{StaticResource Accent}"
                                                      Data="{StaticResource ArrowRight}" />
                                        </Button>
                                    </StackPanel>
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Border>
            <Border Grid.Row="2"
                    BorderBrush="{DynamicResource HeaderGray}"
                    BorderThickness="1"
                    CornerRadius="12"
                    Background="{DynamicResource CardItemColor}"
                    Padding="8"
                    Margin="9"
                    BoxShadow="0 2 6 #00000030">
                <Grid ColumnDefinitions="Auto,*,Auto,Auto,Auto">
                    <Button Grid.Column="0"
                            Classes="round"
                            x:Name="AddMeasureButton"
                            FontSize="16"
                            FontWeight="Bold"
                            Background="{DynamicResource CardItemColor}"
                            Width="32"
                            Height="32"
                            Margin="10,0,12,0"
                            ToolTip.Tip="Add new measure">
                        <PathIcon Data="{StaticResource PlusRegular}" />
                    </Button>

                    <TextBlock Grid.Column="1"
                               FontFamily="{StaticResource NunitoFont}"
                               Classes="header"
                               x:Name="MeasureDisplayText"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Center"
                               FontWeight="SemiBold" />

                    <Button Grid.Column="2"
                            Classes="round"
                            x:Name="BackButton"
                            Background="{DynamicResource CardItemColor}"
                            Width="32"
                            Height="32"
                            Margin="0,0,4,0"
                            ToolTip.Tip="Previous measure">
                        <PathIcon Data="{StaticResource ArrowPrevious}" />
                    </Button>

                    <Button Grid.Column="3"
                            Classes="round"
                            x:Name="ForwardButton"
                            Background="{DynamicResource CardItemColor}"
                            Width="32"
                            Height="32"
                            Margin="4,0,10,0"
                            ToolTip.Tip="Next measure">
                        <PathIcon Data="{StaticResource ArrowNext}" />
                    </Button>
                </Grid>
            </Border>
            <Border Grid.Row="3"
                    Background="{DynamicResource CardItemColor}"
                    CornerRadius="12"
                    BorderBrush="{DynamicResource HeaderGray}"
                    BorderThickness="1"
                    BoxShadow="0 2 6 #00000030"
                    Padding="12"
                    Margin="8">

                <ScrollViewer HorizontalScrollBarVisibility="Auto"
                              VerticalScrollBarVisibility="Auto">
                    <Grid RowDefinitions="Auto,*">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <ItemsControl Grid.Column="1" Grid.ColumnSpan="16" ItemsSource="{Binding StepHeaders}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <UniformGrid Rows="1" Columns="16" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Padding="4">
                                            <TextBlock Text="{Binding}"
                                                       FontWeight="{Binding Converter={StaticResource NoteGroupIndexToFontWeightConverter}}"
                                                       HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"
                                                       FontSize="16" />
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </Grid>

                        <ItemsControl Grid.Row="1" ItemsSource="{Binding MatrixRows}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Rows="11" Columns="1" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>

                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="120" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0" Text="{Binding Name}"
                                                   HorizontalAlignment="Left" VerticalAlignment="Center"
                                                   Margin="4,0,8,0" FontSize="16" />

                                        <ItemsControl Grid.Column="1" Grid.ColumnSpan="16"
                                                      ItemsSource="{Binding Cells}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <UniformGrid Rows="1" Columns="16" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <ToggleButton Classes="stepButton"
                                                                  IsChecked="{Binding IsChecked, Mode=TwoWay}"
                                                                  IsEnabled="{Binding IsEnabled}"
                                                                  Command="{Binding ToggleCommand}"
                                                                  HorizontalAlignment="Stretch"
                                                                  VerticalAlignment="Stretch"
                                                                  Margin="1" />
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </Grid>
                </ScrollViewer>
            </Border>
        </Grid>
    </Grid>
</reactiveUi:ReactiveUserControl>